{
  "diff": "--- a/app/src/component/image-basic/image-basic.component.ts\n+++ b/app/src/component/image-basic/image-basic.component.ts\n@@ -773,14 +773,11 @@ export class ImageBasicComponent extends AbstractPostCommandController implement\n \t\t})).flatMap(results => {\n \t\t\tthis.lightSourceControlIsMultiple = CommonUtil.checkIsMultiple(results);\n \t\t\tthis.lightSourceControl = CommonUtil.getViewValue(this.lightSourceControlIsMultiple, results);\n-\n-\t\t\tif (this.lightSourceControl === OptValLightSourceControl.DYNAMIC_CONTRAST) {\n-\t\t\t\treturn Observable.forkJoin(this.setDynamicContrastValueFromLightSourceControl());\n-\t\t\t} else if (this.lightSourceControl === OptValLightSourceControl.LIGHTS_OUT) {\n-\t\t\t\treturn Observable.forkJoin(this.setOffControl());\n-\t\t\t}\n-\t\t\treturn Observable.empty();\n-\t\t}).subscribe(undefined, undefined, () => {\n+\t\t\treturn Observable.forkJoin(\n+\t\t\t\tthis.setDynamicContrastValueFromLightSourceControl(),\n+\t\t\t\tthis.setOffControl()\n+\t\t\t);\n+\t\t}).subscribe(() => {\n \t\t\tCommonUtil.completeSubject(subject);\n \t\t});\n \t\treturn subject.asObservable();\n@@ -1288,23 +1285,24 @@ export class ImageBasicComponent extends AbstractPostCommandController implement\n \n \t/** 光源制御の変更 */\n \tchangeLightSourceControl() {\n-\t\tlet param: string;\n+\t\tlet param: string[];\n \t\tswitch ((Number)(this.lightSourceControl)) {\n \t\t\tcase OptValLightSourceControl.OFF:\n-\t\t\t\tparam = CmdParamLightSourceControl.OFF;\n+\t\t\t\tparam = [CmdParamLightSourceControl.OFF];\n \t\t\t\tbreak;\n \t\t\tcase OptValLightSourceControl.DYNAMIC_CONTRAST:\n-\t\t\t\tparam = CmdParamLightSourceControl.DYNAMIC_CONTRAST;\n+\t\t\t\tparam = [CmdParamLightSourceControl.DYNAMIC_CONTRAST, this.checkResponseSpeedCmdFromValue(this.responseSpeed), this.checkBlackLevelCmdFromValue(this.blackLevel)];\n \t\t\t\tbreak;\n \t\t\tcase OptValLightSourceControl.LIGHTS_OUT:\n-\t\t\t\tparam = CmdParamLightSourceControl.LIGHTS_OUT;\n+\t\t\t\tparam = [CmdParamLightSourceControl.LIGHTS_OUT, this.checkLightsOutSignalLevelCmdFromValue(this.lightsOutSignalLevel), String(this.lightsOutTimerValue)];\n \t\t\t\tbreak;\n \t\t\tdefault:\n+\t\t\t\tparam = [];\n \t\t\t\tbreak;\n \t\t}\n \t\tconst commands: CommandReqDto[] = [{\n \t\t\tname: Command.LIGHT_SOURCE_CTRL,\n-\t\t\tparameters: [param]\n+\t\t\tparameters: param\n \t\t}];\n \t\tObservable.forkJoin(this.selectedPJList.map(layout => {\n \t\t\treturn this.postPulldownValue(layout, commands, this.lightSourceControl);\n",
  "new_path": "app/src/component/image-basic/image-basic.component.ts",
  "old_path": "app/src/component/image-basic/image-basic.component.ts",
  "a_mode": "100644",
  "b_mode": "100644",
  "new_file": false,
  "renamed_file": false,
  "deleted_file": false,
  "too_large": null
}